execute if entity @e[tag=!restrict,nbt={Item:{tag:{blank_dark_tome:1}}},distance=..1] if entity @e[tag=!restrict,nbt={Item:{tag:{moon_rock:1}}},distance=..1,scores={count=4..}] if entity @e[tag=!restrict,nbt={Item:{tag:{moon_casing:1}}},distance=..1,scores={count=2..}] if entity @e[tag=!restrict,nbt={Item:{tag:{lunar_metal:1}}},distance=..1,scores={count=2..}] run function lunartech:machines/recipes/enchanted_dark_tome_float